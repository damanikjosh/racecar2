<?xml version="1.0"?>
<launch>
  <arg name="localization" default="true" />

  <include file="$(find-pkg-share racecar_description)/launch/description.launch" />
  <node pkg="vesc_driver" exec="vesc_driver_node" name="vesc_driver" output="screen">
    <param from="$(find-pkg-share racecar_base)/config/vesc_config.yaml" />
  </node>

  <node pkg="safety" exec="safety_node" name="safety" output="screen">
    <param name="threshold" value="0.3" />
  </node>

   
  <include file="$(find-pkg-share racecar_base)/launch/include/lidar.launch" />
  <include file="$(find-pkg-share racecar_control)/launch/control.launch" />
  <include file="$(find-pkg-share racecar_control)/launch/teleop.launch" />

  <node pkg="racecar_base" exec="startup.py" name="startup" output="screen" />
  <group if="$(var localization)">
    <!-- ros2 launch racecar_bringup localization_launch.py -->
    <include file="$(find-pkg-share racecar_bringup)/launch/localization_launch.py" />
  </group>
</launch>